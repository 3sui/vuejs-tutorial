<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第7章 和服务端通信 | Vue.js 入门教程</title>
    <meta name="description" content="持续更新中...">
    
    
    <link rel="preload" href="/assets/css/0.styles.f9563ee1.css" as="style"><link rel="preload" href="/assets/js/app.e3b22ae0.js" as="script"><link rel="preload" href="/assets/js/2.422130ee.js" as="script"><link rel="preload" href="/assets/js/14.7e37d39f.js" as="script"><link rel="preload" href="/assets/js/7.1eff77bd.js" as="script"><link rel="prefetch" href="/assets/js/10.474c8bed.js"><link rel="prefetch" href="/assets/js/11.c37469a5.js"><link rel="prefetch" href="/assets/js/12.b92647d2.js"><link rel="prefetch" href="/assets/js/13.cbf4e9b2.js"><link rel="prefetch" href="/assets/js/15.5af843c7.js"><link rel="prefetch" href="/assets/js/16.d44d759a.js"><link rel="prefetch" href="/assets/js/17.65f10b9d.js"><link rel="prefetch" href="/assets/js/18.3b3791c7.js"><link rel="prefetch" href="/assets/js/19.3c488b2a.js"><link rel="prefetch" href="/assets/js/20.25908e21.js"><link rel="prefetch" href="/assets/js/21.0cba4253.js"><link rel="prefetch" href="/assets/js/22.51076707.js"><link rel="prefetch" href="/assets/js/23.9964b8dc.js"><link rel="prefetch" href="/assets/js/24.4dc94da0.js"><link rel="prefetch" href="/assets/js/25.e236c7c7.js"><link rel="prefetch" href="/assets/js/26.a12cda47.js"><link rel="prefetch" href="/assets/js/3.8f1ed214.js"><link rel="prefetch" href="/assets/js/4.cdc20a1f.js"><link rel="prefetch" href="/assets/js/5.47cd3cfa.js"><link rel="prefetch" href="/assets/js/6.96942e1b.js"><link rel="prefetch" href="/assets/js/8.d7139dc6.js"><link rel="prefetch" href="/assets/js/9.0fd8f333.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f9563ee1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vue.js 入门教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/lipengzhou/vuejs-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/lipengzhou/vuejs-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/00-content_introduction.html" class="sidebar-link">课程介绍</a></li><li><a href="/01-vue_introduction.html" class="sidebar-link">第1章 Vue.js 介绍</a></li><li><a href="/02-getting_started.html" class="sidebar-link">第2章 起步</a></li><li><a href="/03-template_syntax.html" class="sidebar-link">第3章 模板语法</a></li><li><a href="/04-todomvc.html" class="sidebar-link">第4章 基础案例 - TodoMVC</a></li><li><a href="/05-component_base.html" class="sidebar-link">第5章 组件基础</a></li><li><a href="/06-transitions.html" class="sidebar-link">第6章 过度&amp;动画</a></li><li><a href="/07-ajax.html" class="active sidebar-link">第7章 和服务端通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07-ajax.html#axios-介绍" class="sidebar-link">axios 介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07-ajax.html#是什么" class="sidebar-link">是什么</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#特色" class="sidebar-link">特色</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#兼容性" class="sidebar-link">兼容性</a></li></ul></li><li class="sidebar-sub-header"><a href="/07-ajax.html#起步" class="sidebar-link">起步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07-ajax.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#执行一个-get-请求" class="sidebar-link">执行一个 GET 请求</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#执行一个-post-请求" class="sidebar-link">执行一个 POST 请求</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#执行多个并发请求" class="sidebar-link">执行多个并发请求</a></li></ul></li><li class="sidebar-sub-header"><a href="/07-ajax.html#axios-api" class="sidebar-link">axios API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07-ajax.html#axios-config" class="sidebar-link">axios(config)</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#axios-url-config" class="sidebar-link">axios(url[, config])</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#请求方法别名" class="sidebar-link">请求方法别名</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#并发请求" class="sidebar-link">并发请求</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#axios-实例" class="sidebar-link">axios 实例</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#实例方法" class="sidebar-link">实例方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/07-ajax.html#请求配置对象" class="sidebar-link">请求配置对象</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#响应体结构" class="sidebar-link">响应体结构</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#默认配置" class="sidebar-link">默认配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07-ajax.html#全局-axios-配置" class="sidebar-link">全局 axios 配置</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#自定义-axios-实例配置" class="sidebar-link">自定义 axios 实例配置</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#配置的优先级" class="sidebar-link">配置的优先级</a></li></ul></li><li class="sidebar-sub-header"><a href="/07-ajax.html#拦截器" class="sidebar-link">拦截器</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#处理错误" class="sidebar-link">处理错误</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#取消请求" class="sidebar-link">取消请求</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#使用-application-x-www-form-urlencoded" class="sidebar-link">使用 application/x-www-form-urlencoded</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07-ajax.html#浏览器端" class="sidebar-link">浏览器端</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#node-js" class="sidebar-link">Node.js</a></li></ul></li><li class="sidebar-sub-header"><a href="/07-ajax.html#发送文件" class="sidebar-link">发送文件</a></li><li class="sidebar-sub-header"><a href="/07-ajax.html#在-vue-中使用-axios" class="sidebar-link">在 Vue 中使用 axios</a></li></ul></li><li><a href="/08-vue_router.html" class="sidebar-link">第8章 Vue Router</a></li><li><a href="/09-vue_cli.html" class="sidebar-link">第9章 Vue CLI</a></li><li><a href="/10-preheat.html" class="sidebar-link">第10章 预热案例</a></li><li><a href="/11-pinyougou.html" class="sidebar-link">第11章 综合案例</a></li><li><a href="/12-webpack.html" class="sidebar-link">第12章 webpack</a></li><li><a href="/13-vuex.html" class="sidebar-link">第13章 Vuex</a></li><li><a href="/vue-style-guide.html" class="sidebar-link">附录1 Vue 编码规范</a></li><li><a href="/vue-debugging.html" class="sidebar-link">附录2 Vue 调试</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="第7章-和服务端通信"><a href="#第7章-和服务端通信" aria-hidden="true" class="header-anchor">#</a> 第7章 和服务端通信</h1> <p>Vue 不像 jQuery 内置了 ajax 请求函数，在 Vue 中没有提供这样的功能。所以当我们需要在 Vue 中和服务端进行通信的时候可选择的方式会更灵活一些。</p> <blockquote><p>注意：Vue 不提供的原因是为了让 Vue 本身更专注于视图部分，保持其渐进灵活的特性。</p></blockquote> <p>所以 Vue 给了我们更多的选择空间，例如我们可以使用下面的可选方案：</p> <ul><li>原生的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">XMLHttpRequest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>原生的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener noreferrer">Fetch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>也可以结合使用 jQuery 自带的 <a href="http://api.jquery.com/category/ajax/" target="_blank" rel="noopener noreferrer">Ajax<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 请求函数</li> <li>早期大家开发 Vue 应用喜欢使用一个第三方插件：<a href="https://github.com/pagekit/vue-resource" target="_blank" rel="noopener noreferrer">Vue Resource<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>目前主流的方案是使用社区中知名的第三方库 <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">axios<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>...</li></ul> <h2 id="axios-介绍"><a href="#axios-介绍" aria-hidden="true" class="header-anchor">#</a> axios 介绍</h2> <h3 id="是什么"><a href="#是什么" aria-hidden="true" class="header-anchor">#</a> 是什么</h3> <p>axios 是一个基于 Promise 的第三方 HTTP 客户端请求库，可以用于浏览器或者 Node.js。
axios 本身和 Vue 没有一毛钱关系，只是简单纯粹的封装了 HTTP 请求功能。可以运行在任何支持 JavaScript 环境的平台。</p> <ul><li><a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">Github 仓库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="特色"><a href="#特色" aria-hidden="true" class="header-anchor">#</a> 特色</h3> <ul><li>在浏览器端使用的是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">XMLHttpRequest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>在 Node 中使用的是 <a href="http://nodejs.org/api/http.html" target="_blank" rel="noopener noreferrer">http<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>支持 Promise</li> <li>支持请求拦截和响应拦截</li> <li>支持转换请求和响应数据</li> <li>支持取消请求</li> <li>自动转换 JSON 数据</li> <li>客户端支持防止 XSRF</li></ul> <h3 id="兼容性"><a href="#兼容性" aria-hidden="true" class="header-anchor">#</a> 兼容性</h3> <p><img src="/assets/img/1555163278802.cf18d59d.png" alt="1555163278802"></p> <blockquote><p>axios 依赖原生的 ECMAScript 6 Promise 支持。</p> <p>如果浏览器不支持 ECMAScript 6 Promise，可以使用 <a href="https://github.com/stefanpenner/es6-promise" target="_blank" rel="noopener noreferrer">es6-promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行兼容处理。</p></blockquote> <h2 id="起步"><a href="#起步" aria-hidden="true" class="header-anchor">#</a> 起步</h2> <h3 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <p>使用 npm:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> <span class="token function">install</span> axios
</code></pre></div><p>使用 bower（一个类似于 npm 的包管理工具，几乎已经淘汰）:</p> <div class="language- extra-class"><pre class="language-text"><code>$ bower install axios
</code></pre></div><p>使用 cdn:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="执行一个-get-请求"><a href="#执行一个-get-请求" aria-hidden="true" class="header-anchor">#</a> 执行一个 <code>GET</code> 请求</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Make a request for a user with a given ID</span>
axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user?ID=12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle success</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle error</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// always executed</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Optionally the request above could also be done as</span>
axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token constant">ID</span><span class="token punctuation">:</span> <span class="token number">12345</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// always executed</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token comment">// Want to use async/await? Add the `async` keyword to your outer function/method.</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user?ID=12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="执行一个-post-请求"><a href="#执行一个-post-请求" aria-hidden="true" class="header-anchor">#</a> 执行一个 <code>POST</code> 请求</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> <span class="token string">'Flintstone'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="执行多个并发请求"><a href="#执行多个并发请求" aria-hidden="true" class="header-anchor">#</a> 执行多个并发请求</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345/permissions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>acct<span class="token punctuation">,</span> perms<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Both requests are now complete</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="axios-api"><a href="#axios-api" aria-hidden="true" class="header-anchor">#</a> axios API</h2> <h3 id="axios-config"><a href="#axios-config" aria-hidden="true" class="header-anchor">#</a> axios(config)</h3> <p>我们可以像使用 <code>$.ajax()</code> 一样来使用 <code>axios</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Send a POST request</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'/user/12345'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> <span class="token string">'Flintstone'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// GET request for remote image</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span><span class="token string">'get'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span><span class="token string">'http://bit.ly/2mTM3nY'</span><span class="token punctuation">,</span>
  responseType<span class="token punctuation">:</span><span class="token string">'stream'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'ada_lovelace.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="axios-url-config"><a href="#axios-url-config" aria-hidden="true" class="header-anchor">#</a> axios(url[, config])</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Send a GET request (default method)</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="请求方法别名"><a href="#请求方法别名" aria-hidden="true" class="header-anchor">#</a> 请求方法别名</h3> <p>为了方便，axios 为所有的请求方法都提供了别名支持。</p> <ul><li>axios.request(config)</li> <li>axios.get(url[, config])</li> <li>axios.delete(url[, config])</li> <li>axios.head(url[, config])</li> <li>axios.options(url[, config])</li> <li>axios.post(url[, data[, config]])</li> <li>axios.put(url[, data[, config]])</li> <li>axios.patch(url[, data[, config]])</li></ul> <blockquote><p>注意：当使用了这些别名方法时，<code>url</code>, <code>method</code> 和 <code>data</code> 属性不需要声明在配置对象中。</p></blockquote> <h3 id="并发请求"><a href="#并发请求" aria-hidden="true" class="header-anchor">#</a> 并发请求</h3> <p>axios 提供了辅助函数用来处理并发请求。</p> <ul><li>axios.all(iterable)</li> <li>axios.spread(callback)</li></ul> <h3 id="axios-实例"><a href="#axios-实例" aria-hidden="true" class="header-anchor">#</a> axios 实例</h3> <p>可以创建一个新的 axios 实例进行自定义配置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token punctuation">:</span> <span class="token string">'https://some-domain.com/api/'</span><span class="token punctuation">,</span>
  timeout<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'X-Custom-Header'</span><span class="token punctuation">:</span> <span class="token string">'foobar'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="实例方法"><a href="#实例方法" aria-hidden="true" class="header-anchor">#</a> 实例方法</h3> <p>实例拥有和 axios 基本一样的能力。</p> <ul><li><p>axios#request(config)</p></li> <li><p>axios#get(url[, config])</p></li> <li><p>axios#delete(url[, config])</p></li> <li><p>axios#head(url[, config])</p></li> <li><p>axios#options(url[, config])</p></li> <li><p>axios#post(url[, data[, config]])</p></li> <li><p>axios#put(url[, data[, config]])</p></li> <li><p>axios#patch(url[, data[, config]])</p></li> <li><p>axios#getUri([config])</p></li></ul> <h2 id="请求配置对象"><a href="#请求配置对象" aria-hidden="true" class="header-anchor">#</a> 请求配置对象</h2> <p>下面是所有的可参考配置项。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  // `url` is the server URL that will be used for the request
  url<span class="token operator">:</span> '/user'<span class="token punctuation">,</span>

  // `method` is the request method to be used when making the request
  method<span class="token operator">:</span> 'get'<span class="token punctuation">,</span> // default

  // `baseURL` will be prepended to `url` unless `url` is absolute.
  // It can be convenient to set `baseURL` for an instance of axios to pass relative URLs
  // to methods of that instance.
  baseURL<span class="token operator">:</span> 'https<span class="token operator">:</span>//some-domain.com/api/'<span class="token punctuation">,</span>

  // `transformRequest` allows changes to the request data before it is sent to the server
  // This is only applicable for request methods 'PUT'<span class="token punctuation">,</span> 'POST'<span class="token punctuation">,</span> and 'PATCH'
  // The last function in the array must return a string or an instance of Buffer<span class="token punctuation">,</span> ArrayBuffer<span class="token punctuation">,</span>
  // FormData or Stream
  // You may modify the headers object.
  transformRequest<span class="token operator">:</span> <span class="token punctuation">[</span>function (data<span class="token punctuation">,</span> headers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    // Do whatever you want to transform the data

    return data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  // `transformResponse` allows changes to the response data to be made before
  // it is passed to then/catch
  transformResponse<span class="token operator">:</span> <span class="token punctuation">[</span>function (data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    // Do whatever you want to transform the data

    return data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  // `headers` are custom headers to be sent
  headers<span class="token operator">:</span> <span class="token punctuation">{</span>'X-Requested-With'<span class="token operator">:</span> 'XMLHttpRequest'<span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `params` are the URL parameters to be sent with the request
  // Must be a plain object or a URLSearchParams object
  params<span class="token operator">:</span> <span class="token punctuation">{</span>
    ID<span class="token operator">:</span> <span class="token number">12345</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `paramsSerializer` is an optional function in charge of serializing `params`
  // (e.g. https<span class="token operator">:</span>//www.npmjs.com/package/qs<span class="token punctuation">,</span> http<span class="token operator">:</span>//api.jquery.com/jquery.param/<span class="token punctuation">)</span>
  paramsSerializer<span class="token operator">:</span> function (params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    return Qs.stringify(params<span class="token punctuation">,</span> <span class="token punctuation">{</span>arrayFormat<span class="token operator">:</span> 'brackets'<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `data` is the data to be sent as the request body
  // Only applicable for request methods 'PUT'<span class="token punctuation">,</span> 'POST'<span class="token punctuation">,</span> and 'PATCH'
  // When no `transformRequest` is set<span class="token punctuation">,</span> must be of one of the following types<span class="token operator">:</span>
  // - string<span class="token punctuation">,</span> plain object<span class="token punctuation">,</span> ArrayBuffer<span class="token punctuation">,</span> ArrayBufferView<span class="token punctuation">,</span> URLSearchParams
  // - Browser only<span class="token operator">:</span> FormData<span class="token punctuation">,</span> File<span class="token punctuation">,</span> Blob
  // - Node only<span class="token operator">:</span> Stream<span class="token punctuation">,</span> Buffer
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> 'Fred'
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `timeout` specifies the number of milliseconds before the request times out.
  // If the request takes longer than `timeout`<span class="token punctuation">,</span> the request will be aborted.
  timeout<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> // default is `<span class="token number">0</span>` (no timeout<span class="token punctuation">)</span>

  // `withCredentials` indicates whether or not cross-site Access-Control requests
  // should be made using credentials
  withCredentials<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> // default

  // `adapter` allows custom handling of requests which makes testing easier.
  // Return a promise and supply a valid response (see lib/adapters/README.md<span class="token punctuation">)</span>.
  adapter<span class="token operator">:</span> function (config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    /* ... */
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `auth` indicates that HTTP Basic auth should be used<span class="token punctuation">,</span> and supplies credentials.
  // This will set an `Authorization` header<span class="token punctuation">,</span> overwriting any existing
  // `Authorization` custom headers you have set using `headers`.
  auth<span class="token operator">:</span> <span class="token punctuation">{</span>
    username<span class="token operator">:</span> 'janedoe'<span class="token punctuation">,</span>
    password<span class="token operator">:</span> 's00pers3cret'
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `responseType` indicates the type of data that the server will respond with
  // options are 'arraybuffer'<span class="token punctuation">,</span> 'blob'<span class="token punctuation">,</span> 'document'<span class="token punctuation">,</span> 'json'<span class="token punctuation">,</span> 'text'<span class="token punctuation">,</span> 'stream'
  responseType<span class="token operator">:</span> 'json'<span class="token punctuation">,</span> // default

  // `responseEncoding` indicates encoding to use for decoding responses
  // Note<span class="token operator">:</span> Ignored for `responseType` of 'stream' or client-side requests
  responseEncoding<span class="token operator">:</span> 'utf8'<span class="token punctuation">,</span> // default

  // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token
  xsrfCookieName<span class="token operator">:</span> 'XSRF-TOKEN'<span class="token punctuation">,</span> // default

  // `xsrfHeaderName` is the name of the http header that carries the xsrf token value
  xsrfHeaderName<span class="token operator">:</span> 'X-XSRF-TOKEN'<span class="token punctuation">,</span> // default

  // `onUploadProgress` allows handling of progress events for uploads
  onUploadProgress<span class="token operator">:</span> function (progressEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    // Do whatever you want with the native progress event
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `onDownloadProgress` allows handling of progress events for downloads
  onDownloadProgress<span class="token operator">:</span> function (progressEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    // Do whatever you want with the native progress event
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `maxContentLength` defines the max size of the http response content in bytes allowed
  maxContentLength<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>

  // `validateStatus` defines whether to resolve or reject the promise for a given
  // HTTP response status code. If `validateStatus` returns `<span class="token boolean">true</span>` (or is set to `<span class="token null">null</span>`
  // or `undefined`<span class="token punctuation">)</span><span class="token punctuation">,</span> the promise will be resolved<span class="token punctuation">;</span> otherwise<span class="token punctuation">,</span> the promise will be
  // rejected.
  validateStatus<span class="token operator">:</span> function (status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    return status &gt;= <span class="token number">200</span> &amp;&amp; status &lt; <span class="token number">300</span><span class="token punctuation">;</span> // default
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `maxRedirects` defines the maximum number of redirects to follow in node.js.
  // If set to <span class="token number">0</span><span class="token punctuation">,</span> no redirects will be followed.
  maxRedirects<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> // default

  // `socketPath` defines a UNIX Socket to be used in node.js.
  // e.g. '/var/run/docker.sock' to send requests to the docker daemon.
  // Only either `socketPath` or `proxy` can be specified.
  // If both are specified<span class="token punctuation">,</span> `socketPath` is used.
  socketPath<span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span> // default

  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http
  // and https requests<span class="token punctuation">,</span> respectively<span class="token punctuation">,</span> in node.js. This allows options to be added like
  // `keepAlive` that are not enabled by default.
  httpAgent<span class="token operator">:</span> new http.Agent(<span class="token punctuation">{</span> keepAlive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  httpsAgent<span class="token operator">:</span> new https.Agent(<span class="token punctuation">{</span> keepAlive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  // 'proxy' defines the hostname and port of the proxy server.
  // You can also define your proxy using the conventional `http_proxy` and
  // `https_proxy` environment variables. If you are using environment variables
  // for your proxy configuration<span class="token punctuation">,</span> you can also define a `no_proxy` environment
  // variable as a comma-separated list of domains that should not be proxied.
  // Use `<span class="token boolean">false</span>` to disable proxies<span class="token punctuation">,</span> ignoring environment variables.
  // `auth` indicates that HTTP Basic auth should be used to connect to the proxy<span class="token punctuation">,</span> and
  // supplies credentials.
  // This will set an `Proxy-Authorization` header<span class="token punctuation">,</span> overwriting any existing
  // `Proxy-Authorization` custom headers you have set using `headers`.
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> '<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>'<span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
    auth<span class="token operator">:</span> <span class="token punctuation">{</span>
      username<span class="token operator">:</span> 'mikeymike'<span class="token punctuation">,</span>
      password<span class="token operator">:</span> 'rapunz3l'
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `cancelToken` specifies a cancel token that can be used to cancel the request
  // (see Cancellation section below for details<span class="token punctuation">)</span>
  cancelToken<span class="token operator">:</span> new CancelToken(function (cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="响应体结构"><a href="#响应体结构" aria-hidden="true" class="header-anchor">#</a> 响应体结构</h2> <p>请求的响应包含以下信息。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  // `data` is the response that was provided by the server
  data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `status` is the HTTP status code from the server response
  status<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

  // `statusText` is the HTTP status message from the server response
  statusText<span class="token operator">:</span> 'OK'<span class="token punctuation">,</span>

  // `headers` the headers that the server responded with
  // All header names are lower cased
  headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `config` is the config that was provided to `axios` for the request
  config<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  // `request` is the request that generated this response
  // It is the last ClientRequest instance in node.js (in redirects<span class="token punctuation">)</span>
  // and an XMLHttpRequest instance the browser
  request<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当使用 <code>then</code> 方法时，将收到如下结果</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="默认配置"><a href="#默认配置" aria-hidden="true" class="header-anchor">#</a> 默认配置</h2> <h3 id="全局-axios-配置"><a href="#全局-axios-配置" aria-hidden="true" class="header-anchor">#</a> 全局 axios 配置</h3> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'https://api.example.com'</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="自定义-axios-实例配置"><a href="#自定义-axios-实例配置" aria-hidden="true" class="header-anchor">#</a> 自定义 axios 实例配置</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Set config defaults when creating the instance</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token punctuation">:</span> <span class="token string">'https://api.example.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Alter defaults after instance has been created</span>
instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="配置的优先级"><a href="#配置的优先级" aria-hidden="true" class="header-anchor">#</a> 配置的优先级</h3> <p>当全局、实例、请求出现相同的 config 配置项时，优先级如下</p> <ul><li>请求的 config</li> <li>实例的 config</li> <li>全局的 config</li></ul> <blockquote><p>自上而下</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Create an instance using the config defaults provided by the library</span>
<span class="token comment">// At this point the timeout config value is `0` as is the default for the library</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Override timeout default for the library</span>
<span class="token comment">// Now all requests using this instance will wait 2.5 seconds before timing out</span>
instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2500</span><span class="token punctuation">;</span>

<span class="token comment">// Override timeout for this request as it's known to take a long time</span>
instance<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/longRequest'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  timeout<span class="token punctuation">:</span> <span class="token number">5000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="拦截器"><a href="#拦截器" aria-hidden="true" class="header-anchor">#</a> 拦截器</h2> <p>axios 支持在处理请求或响应之前拦截请求或响应。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Add a request interceptor</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something before request is sent</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with request error</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a response interceptor</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with response data</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with response error</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以删除拦截器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myInterceptor <span class="token operator">=</span> axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">eject</span><span class="token punctuation">(</span>myInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以为自定义 axios 实例添加拦截器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="处理错误"><a href="#处理错误" aria-hidden="true" class="header-anchor">#</a> 处理错误</h2> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// The request was made and the server responded with a status code</span>
      <span class="token comment">// that falls out of the range of 2xx</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// The request was made but no response was received</span>
      <span class="token comment">// `error.request` is an instance of XMLHttpRequest in the browser and an instance of</span>
      <span class="token comment">// http.ClientRequest in node.js</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// Something happened in setting up the request that triggered an Error</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以使用validateStatus配置选项定义自定义HTTP状态代码错误范围。</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  validateStatus<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> status <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">;</span> <span class="token comment">// Reject only if the status code is greater than or equal to 500</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="取消请求"><a href="#取消请求" aria-hidden="true" class="header-anchor">#</a> 取消请求</h2> <p>可以使用取消令牌取消 token。</p> <p>可以使用 <code>CancelToken.source</code> 工厂函数创建取消令牌，如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cancelToken<span class="token punctuation">:</span> source<span class="token punctuation">.</span>token
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>thrown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request canceled'</span><span class="token punctuation">,</span> thrown<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle error</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'new name'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cancelToken<span class="token punctuation">:</span> source<span class="token punctuation">.</span>token
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// cancel the request (the message parameter is optional)</span>
source<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'Operation canceled by the user.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>还可以通过将函数执行程序传递给 Cancel Token 构造函数来创建取消令牌：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">let</span> cancel<span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cancelToken<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">executor</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// An executor function receives a cancel function as a parameter</span>
    cancel <span class="token operator">=</span> c<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// cancel the request</span>
<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：可以使用相同的取消令牌取消多个请求。</p></blockquote> <h2 id="使用-application-x-www-form-urlencoded"><a href="#使用-application-x-www-form-urlencoded" aria-hidden="true" class="header-anchor">#</a> 使用 application/x-www-form-urlencoded</h2> <p>默认情况下，axios 将 JavaScript 对象序列化为 <code>JSON</code>。要以 <code>application / x-www-form-urlencoded</code> 格式发送数据，您可以使用以下选项之一。</p> <h3 id="浏览器端"><a href="#浏览器端" aria-hidden="true" class="header-anchor">#</a> 浏览器端</h3> <p>在浏览器中，您可以使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> API，如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'param1'</span><span class="token punctuation">,</span> <span class="token string">'value1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'param2'</span><span class="token punctuation">,</span> <span class="token string">'value2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/foo'</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>有些浏览器还不支持 URLSearchParms，可以使用这个 <a href="https://github.com/WebReflection/url-search-params" target="_blank" rel="noopener noreferrer">polyfill<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 做兼容处理。</p></blockquote> <p>另外也可以使用 <a href="https://github.com/ljharb/qs" target="_blank" rel="noopener noreferrer">qs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来进行处理</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'qs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/foo'</span><span class="token punctuation">,</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'bar'</span><span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>或者在 ECMAScript 6 中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'qs'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'bar'</span><span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
  url<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">axios</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="node-js"><a href="#node-js" aria-hidden="true" class="header-anchor">#</a> Node.js</h3> <p>在node.js中，您可以使用 <a href="https://nodejs.org/api/querystring.html" target="_blank" rel="noopener noreferrer">querystring<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 模块，如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://something.com/'</span><span class="token punctuation">,</span> querystring<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你也可以使用 <a href="https://github.com/ljharb/qs" target="_blank" rel="noopener noreferrer">qs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <blockquote><p>注意：querystring 模块不支持嵌套对象，qs 模块支持。</p></blockquote> <h2 id="发送文件"><a href="#发送文件" aria-hidden="true" class="header-anchor">#</a> 发送文件</h2> <p>axios 支持发送 XHR 2.0 中新增的 FormData 对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">axops</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> formData
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>axios 会自动识别数据对象 FormData，并将请求头中的 Content-Type 设置为 <code>multipart/form-data</code>。</p></blockquote> <h2 id="在-vue-中使用-axios"><a href="#在-vue-中使用-axios" aria-hidden="true" class="header-anchor">#</a> 在 Vue 中使用 axios</h2> <ol><li>从模块化角度考虑，建议将 axios 配置相关代码放到一个独立的模块中</li> <li>使用 axios 建议通过创建单独的 axios 实例的方式，例如当你的应用有多个不同域名的接口的时候，就可以创建多个 axios 实例分别配置</li> <li>当然，如果你的接口域名只有一个，可以不创建实例，直接配置全局的 axios 也是可以的，但根据经验，推荐实例方式，因为当你有了这样的需求的时候，我们只需要增加代码而不需要修改代码</li> <li>我们最后要使用封装好的 axios 发送请求，有两种方式
<ol><li>方式一：在哪个组件中发送请求就在哪里 import 引入</li> <li>方式二：几乎每个组件都需要发送请求，所以可以将 axios 挂载到 Vue 原型上，这样就可以直接在组件中通过 this.xxx 来访问 axios 了，而不需要每次都来 import</li> <li>方式三：为了项目的更好维护性，我们建议将所有的请求都封装为 api 模块中的请求函数，这样哪里需要就在哪里加载调用。由于 api 是独立的 js 模块，不是组件，所以在 api 模块中发送请求必须 import  导入  axios 函数。所以这种情况下将 axios 挂载到 Vue 原型上就没有意义了，因为 api 中也调用不到</li> <li>最后：推荐方式二（更简单） + 方式三（可维护性好，推荐）</li></ol></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lipengzhou/vuejs-tutorial/edit/master/docs/07-ajax.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2019-04-13 02:53:27</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/06-transitions.html" class="prev">
          第6章 过度&amp;动画
        </a></span> <span class="next"><a href="/08-vue_router.html">
          第8章 Vue Router
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.e3b22ae0.js" defer></script><script src="/assets/js/2.422130ee.js" defer></script><script src="/assets/js/14.7e37d39f.js" defer></script><script src="/assets/js/7.1eff77bd.js" defer></script>
  </body>
</html>
